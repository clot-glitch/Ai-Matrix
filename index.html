<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>MATRIX — AI Chatbot</title>
<style>
    body {
        background: black;
        color: #00FF41;
        font-family: "Courier New", monospace;
        margin: 0;
        padding: 0;
    }
    #chatbox {
        width: 90%;
        height: 75vh;
        margin: 20px auto;
        padding: 10px;
        background: rgba(0, 40, 0, 0.7);
        border: 1px solid #00FF41;
        overflow-y: scroll;
        white-space: pre-wrap;
    }
    #input {
        width: 90%;
        margin: 0 auto 20px auto;
        padding: 14px;
        background: black;
        color: #00FF41;
        border: 1px solid #00FF41;
        font-size: 18px;
        outline: none;
    }
    .title {
        text-align:center;
        margin-top:15px;
        font-size:28px;
        color:#00FF41;
        text-shadow:0 0 10px #00FF41;
    }
</style>

<script type="module">
import { pipeline } from "https://cdn.jsdelivr.net/npm/@xenova/transformers/dist/transformers.min.js";

let generator = null;

// LOAD MODEL FROM CDN
async function loadModel() {
    appendMessage("SYSTEM", "Booting MATRIX...");
    appendMessage("SYSTEM", "Loading model from CDN...");
    generator = await pipeline(
        "text-generation",
        "Xenova/Qwen2.5-1.5B-Instruct",   // FREE & CDN hosted
        { dtype: "q4", device: "webgpu" }
    );
    appendMessage("SYSTEM", "MATRIX Online.");
}
loadModel();

function appendMessage(sender, text) {
    const box = document.getElementById("chatbox");
    box.innerHTML += `\n<b>${sender}:</b> ${text}`;
    box.scrollTop = box.scrollHeight;
}

window.sendMessage = async function() {
    const inp = document.getElementById("input");
    let text = inp.value.trim();
    if (!text) return;
    appendMessage("YOU", text);
    inp.value = "";

    if (!generator) {
        appendMessage("MATRIX", "Model still loading...");
        return;
    }

    const out = await generator(text, {
        max_new_tokens: 200,
        temperature: 0.7
    });

    appendMessage("MATRIX", out[0].generated_text);
};
</script>
</head>

<body>
<h2 class="title">M A T R I X — AI Chatbot</h2>
<div id="chatbox"></div>
<input id="input" placeholder="Speak to MATRIX…" 
       onkeydown="if(event.key==='Enter')sendMessage()">
</body>
</html>
